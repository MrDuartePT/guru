diff '--color=auto' -ru /var/tmp/portage/sci-mathematics/clasp-3.3.7/work/clasp-3.3.7/app/CMakeLists.txt clasp-3.3.7/app/CMakeLists.txt
--- /var/tmp/portage/sci-mathematics/clasp-3.3.7/work/clasp-3.3.7/app/CMakeLists.txt	2022-04-28 06:43:26.295108990 +0200
+++ clasp-3.3.7/app/CMakeLists.txt	2022-04-28 07:03:05.488454553 +0200
@@ -1,8 +1,8 @@
-set(files
-	clasp_app.cpp
-	clasp_app.h
-	main.cpp)
-add_executable(clasp ${files})
+add_library(clasp_app SHARED clasp_app.cpp)
+set(clasp_app_header clasp_app.h)
+add_executable(clasp main.cpp)
+target_include_directories(clasp_app PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})
+target_include_directories(clasp PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})
 set_target_properties(clasp PROPERTIES FOLDER exe)
 if (NOT CMAKE_INSTALL_BINDIR)
 	message(STATUS "BINDIR not set - using bin")
@@ -19,6 +19,9 @@
 	endif()
 	target_link_libraries(clasp "-static")
 endif()
-target_link_libraries(clasp libclasp)
+target_link_libraries(clasp_app libclasp)
+target_link_libraries(clasp clasp_app)
 
 install(TARGETS clasp EXPORT clasp DESTINATION ${CMAKE_INSTALL_BINDIR})
+install(TARGETS clasp_app EXPORT clasp_app DESTINATION ${CMAKE_INSTALL_LIBDIR})
+install(FILES ${clasp_app_header} DESTINATION ${CMAKE_INSTALL_INCLUDEDIR}/clasp/app)
